# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

# Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      - uses: actions/checkout@v3
      
      - name: version of cmake
        shell: bash
        run: |
          VERSION=`cmake --version`
          echo $VERSION
      # Runs a single command using the runners shell
      - name: build formatterlib
        shell: bash 
        run: |
         cd formatter_lib
         cmake -S formatter_lib -B formatter_lib/build
         cmake --build formatter_lib/build --target formatter
        
      - name: build formatterexlib
        shell: bash 
        run: |
         cmake -S formatter_ex_lib -B formatter_ex_lib/build
         cmake --build formatter_ex_lib/build --target formatter_ex
        
      - name: build formatterexlib
        shell: bash 
        run: |
         cmake -S formatter_ex_lib -B formatter_ex_lib/build
         cmake --build formatter_ex_lib/build --target formatter_ex
        
      - name: build solverlib
        shell: bash 
        run: |
         cmake -S solver_lib -B solver_lib/build
         cmake --build solver_lib/build --target solver
        
      - name: build solverapp
        shell: bash 
        run: |
         cmake -S solver_application -B solver_application/build
         cmake --build solver_application/build --target equation
        
      - name: build helloworldapp
        shell: bash 
        run: |
         cmake -S hello_world_application -B hello_world_application/build
         cmake --build hello_world_application/build --target hello_world
